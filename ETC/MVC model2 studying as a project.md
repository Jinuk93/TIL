# ì½”ë“œ(MVC model2) ë³µìŠµ

---

## ğŸ“Œ ìƒí’ˆì— ëŒ€í•œ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ DBë¥¼ ê°”ë‹¤ì˜¤ëŠ” ë°©ë²•

### MVC2 model

![Untitled](%E1%84%8F%E1%85%A9%E1%84%83%E1%85%B3(MVC%20m%20ea8fe/Untitled.png)

### ğŸ“Œì¤‘ê°„ì—ì„œ í•œë²ˆ ì ê²€í•˜ëŠ” DBë¥¼ ê°”ë‹¤ì˜¤ëŠ” ë°©ë²•

<aside>
ğŸ“Œ **( ì‚¬ìš©ì : Viewì—ì„œ Jsp ( ajax â†’ url ) )** â†’ **Controller(Servlet : ìë°”ì½”ë“œ, ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì²˜ë¦¬, ëª¨ë¸ í˜¸ì¶œ((ë°ì´í„°ìš”ì²­))**

**JSP(ì‚¬ìš©ì ìš”ì²­) â†’**
**Controller â†’ Service(interface) â†’ ServcieImpl(Service êµ¬í˜„ í•œ ì¹œêµ¬ = Service) â†’ DAO(interface) â†’ Mybatis(DAO êµ¬í˜„í•œ ì¹œêµ¬ = DAO) â†’ Mapper**  

*ì—¬ê¸°ì„œ InterfaceëŠ” ì—†ë‹¤ê³  ë³´ë©´ ëœë‹¤ ì‰½ê²Œ ìš”ì•½ì •ë¦¬ë¥¼ í•œë‹¤ë©´!!*

- **ìš”ì²­ ìˆœì„œ**
    - **JSP â†’ Controller â†’ Serviceimpl(Service) â†’ Mybatis(DAO) â†’ Mapper**
- **Return ìˆœì„œ**
    - **Mapper â†’ Mybatis(DAO) â†’ Serviceimpl(Service) â†’ Controller â†’ JSP**

**MVC2 modelì€ M(model) V(View, JSP) C(Controller, Servlet)ë¡œ êµ¬ì„±ë˜ìˆë‹¤**

- **JSP â†’ Controller â†’ Serviceimpl(Service) â†’ Mybatis(DAO) â†’ Mapper**

ì—¬ê¸°ì„œ  **Serviceimpl(Service) â†’ Mybatis(DAO) â†’ MapperëŠ” Modelì´ë‹¤**

- DAOëŠ” Interfaceì´ê³ , DAOë¥¼ êµ¬í˜„í•œ DAOMybatis ì¦‰, Mybatisê°€ DAOì˜ ì—­í• ì„ í•œë‹¤
ë¼ê³  ìƒê°í•˜ë©´ ë˜ëŠ”ë°, 
MybatisëŠ” DBë‘ ì—°ê²°í•˜ëŠ” í´ë˜ìŠ¤ì´ì, Mapper(SQLë¬¸ ì‘ì„±í•˜ëŠ”)ë‘ ì—°ê²°ëœë‹¤
</aside>

---

## ì‚¬ìš©ìê°€ ë°ì´í„°ë¥¼ ìš”ì²­í•˜ê³ , ê°€ì ¸ì˜¤ê¸°ê¹Œì§€ì˜ ê³¼ì •ì„ ì‹œì‘í•´ë³¼ê¹Œ?

### JSP ( Java in html )

- **JSP ì•ˆì— ìë°”ìŠ¤í¬ë¦½íŠ¸ë¥¼ êµ¬ì„±í•˜ì˜€ë‹¤.**

### ì‚¬ìš©ì(User)ê°€ ì–´ë–¤ ì •ë³´ë¥¼ ìš”ì²­í•˜ê¸° ìœ„í•´ View(JSP)ì—ì„œ ì–´ë–¤ê±¸ í´ë¦­í–ˆì–´!

![Untitled](%E1%84%8F%E1%85%A9%E1%84%83%E1%85%B3(MVC%20m%20ea8fe/Untitled%201.png)

- **47lineì—ì„œ $(function() { ì„ í†µí•´ â€˜ì˜¨ë¡œë“œâ€™ ê°€ ì‹¤í–‰ë˜ë©´**
- **48lineì˜ aJaxê°€ ì‹¤í–‰ëœë‹¤**
- **aJax ì‹¤í–‰ë  ë•Œ ê°€ì¥ ë¨¼ì € ì‹¤í–‰ë˜ëŠ” ê²ƒì€ urlë¡œ ì´ë™í•˜ëŠ” ê²ƒì´ë‹¤.**

### ìŠ¤í¬ë¦½íŠ¸ ì–¸ì–´ë¡œ ì‘ì„±ëœ JSPì—ì„œ Onloadë¥¼ í†µí•´, ajaxê°€ ì‹¤í–‰ë¬ì–´! url GOGO!!

![Untitled](%E1%84%8F%E1%85%A9%E1%84%83%E1%85%B3(MVC%20m%20ea8fe/Untitled%202.png)

- **urlì—ì„œ shopping ì»¨íŠ¸ë¡¤ëŸ¬ì˜ getBeanListë¡œ ë³´ë‚¸ë‹¤ ( jsp â†’ Controller[servlet] )**

### JSPì—ì„œ ì‚¬ìš©ìê°€ ìš”ì²­ì„ í•´ì„œ Controller(Servlet)ë¡œ ì™”ì–´!!

![Untitled](%E1%84%8F%E1%85%A9%E1%84%83%E1%85%B3(MVC%20m%20ea8fe/Untitled%203.png)

- **ì›ë‘(BeanList) ë²„íŠ¼ì„ í´ë¦­í•˜ì˜€ì„ ë•Œ, ê°€ì¥ ë¨¼ì € ì‹¤í–‰ë˜ëŠ” url ì´ë‹¤**

### Controller(Servlet)ì˜ ì½”ë“œë¥¼ í•œ ë²ˆ ì‚´í´ë³´ì!!

![Untitled](%E1%84%8F%E1%85%A9%E1%84%83%E1%85%B3(MVC%20m%20ea8fe/Untitled%204.png)

### Controllerì—ì„œ Servie(Interface)ë¡œ ë³´ë‚¼ê±°ì•¼!

![Untitled](%E1%84%8F%E1%85%A9%E1%84%83%E1%85%B3(MVC%20m%20ea8fe/Untitled%205.png)

- **serviceì˜ BeanListë¡œ ê°„ë‹¤ (controllerì—ì„œ serviceë¡œ ì™”ë‹¤)**

### Service(Interface) ì½”ë“œí™•ì¸!

![Untitled](%E1%84%8F%E1%85%A9%E1%84%83%E1%85%B3(MVC%20m%20ea8fe/Untitled%206.png)

### ServiceëŠ” ì¸í„°í˜ì´ìŠ¤ë„¤? ê·¸ëŸ¼ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•  ì¹œêµ¬ë¥¼ ì°¾ì„êº¼ì•¼!

![Untitled](%E1%84%8F%E1%85%A9%E1%84%83%E1%85%B3(MVC%20m%20ea8fe/Untitled%207.png)

- **ì´ ì¹œêµ¬ëŠ” interfaceì´ë‹¤. ì´ interfaceë¥¼ êµ¬í˜„í•´ì¤€ ì¹œêµ¬ë¥¼ ì°¾ì•„ë³´ì!**

### Serviceimpl ì´ë¼ëŠ” ì´ë¦„ì„ ê°€ì§„ ì¹œêµ¬ê°€ Service(Inteface)ë¥¼ êµ¬í˜„í•œ ì¹œêµ¬ë¼ê³ !!

![Untitled](%E1%84%8F%E1%85%A9%E1%84%83%E1%85%B3(MVC%20m%20ea8fe/Untitled%208.png)

- **interfaceë¥¼ êµ¬í˜„í•´ì¤€ ì¹œêµ¬ë¥¼ ì°¾ì•˜ë‹¤! ì—¬ê¸°ì„œ ìœ„ì˜ ì›ë‘(BeanList)ë¥¼ ì°¾ì•„ë³´ì (getBeanList)**

### Serviceimpleì—ì„œ DAOë¡œ ê°ˆê±°ì•¼!!

![Untitled](%E1%84%8F%E1%85%A9%E1%84%83%E1%85%B3(MVC%20m%20ea8fe/Untitled%209.png)

- **BeanListë¥¼ DAO.getBeanListë¡œê°„ë‹¤ ( Service â†’ DAO )**

### DAOë¡œ ì™€ë³´ë‹ˆê¹ ì´ ì¹œêµ¬ë„ Interface ì–ì•„?! ì´ ì¹œêµ¬ë¥¼ êµ¬í˜„í•œ ì¹œêµ¬ë„ ì°¾ì•„ë³´ì!

![Untitled](%E1%84%8F%E1%85%A9%E1%84%83%E1%85%B3(MVC%20m%20ea8fe/Untitled%2010.png)

- **DAO ë˜í•œ interfaceì´ë‹¤. ì´ ì¹œêµ¬ë¥¼ êµ¬í˜„í•œ ì¹œêµ¬ë¥¼ ì°¾ì•„ë³´ì!**
- **ìœ„ì˜ ì‚¬ì§„ë³´ë‹ˆê¹ DAOMybatisê°€ DAOë¥¼ êµ¬í˜„í•´ ì£¼ì—ˆë‹¤.  ( DAO â†’ Mybatis ë¡œ ê°ˆ ê²ƒ!)**

### DAO(Interface)ë¥¼ êµ¬í˜„í•´ì£¼ëŠ” Mybatisë¼ëŠ”ê±¸ ì°¾ì•˜ì–´!!

![Untitled](%E1%84%8F%E1%85%A9%E1%84%83%E1%85%B3(MVC%20m%20ea8fe/Untitled%2011.png)

- **DAO â†’ Mybatis**

### ë‚˜, Mybatis SQLê³¼ ì—°ë™í•˜ê¸° ìœ„í•œ ì‚¬ë‚˜ì´ì§€! ê·¸ëŸ¼ Mapperë¡œ í•œë²ˆ ê°€ë³¼ê¹Œ?

![Untitled](%E1%84%8F%E1%85%A9%E1%84%83%E1%85%B3(MVC%20m%20ea8fe/Untitled%2012.png)

- **Mybatisë¥¼ ë³´ë‹ˆê¹ Mybatisê°€ DBë‘ ì§ì ‘ì ìœ¼ë¡œ ì—°ë™í•´ì£¼ëŠ” ì¹œêµ¬ë¼ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤**

**( Mybatisê°€ Mapperë¡œ ë³´ë‚´ ì¤„ ê²ƒ! )**

### Mapperì—ì„œ ì™”ì–´! ì´ì œ, DTOë¡œ(ë¥¼ í†µí•´) return ì‹œì¼œì£¼ê¸° ìœ„í•œ ê³¼ì • 
ì¦‰, ì‚¬ìš©ìê°€ ìš”ì²­í•œ ë°ì´í„°ë¥¼ ë°›ì•˜ì–´! ì´ì œ ì´ê±¸ ì§‘ìœ¼ë¡œ ë‹¤ì‹œ ê°€ì ¸ê°€ì!!

![Untitled](%E1%84%8F%E1%85%A9%E1%84%83%E1%85%B3(MVC%20m%20ea8fe/Untitled%2013.png)

- **ì´ë ‡ê²Œ Mybatisê°€ Mapperë¡œ ë³´ë‚´ì£¼ì–´ì„œ ë‚ ë¼ì™”ë‹¤!**
- **ë“œë˜ê·¸ ëœ ì½”ë“œë¥¼ ì˜ ë³´ë©´, resultType = â€œshoppingâ€ì´ë€ ì½”ë“œê°€ ìˆë‹¤ ì´ê²Œ ë¬´ì—‡ì¼ê¹Œ?**

### Mapperì—ì„œ ì íŒ ì½”ë“œê°€ ë¬´ìŠ¨ ì˜ë¯¸ì¸ì§€ ì•Œë ¤ë©´, mybatis-config.xml í™˜ê²½ì„¤ì • íŒŒì¼ì„ í™•ì¸í•´ë³´ì!

![Untitled](%E1%84%8F%E1%85%A9%E1%84%83%E1%85%B3(MVC%20m%20ea8fe/Untitled%2014.png)

![Untitled](%E1%84%8F%E1%85%A9%E1%84%83%E1%85%B3(MVC%20m%20ea8fe/Untitled%2015.png)

- **í•œ ë¸”ë¡ ìœ„ì˜ ì‚¬ì§„ì„ ë³´ë©´ resultTypeì´ shoppingì´ë¼ ì í˜€ìˆëŠ”ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤**
- **ì´ê²Œ ë¬´ì—‡ì¸ì§€ í™•ì¸í•˜ë ¤ë©´, ì‚¬ì§„ ì¢Œì¸¡ì„ ë³´ë©´ spring íŒ¨í‚¤ì§€ ì•ˆì˜ mybatis-config.xml í™˜ê²½ì„¤ì • íŒŒì¼ì´ ìˆë‹¤**
- **alias ë³„ëª…ì´ shoppingì¸ ì¹œêµ¬ì˜ ì›ë˜ ì´ë¦„ì„ ë³´ë©´, shopping.bean.ShoppingDTOì´ë‹¤**
- **ì´ëŠ” DTOì— ë‹´ì•„ì„œ ì •ë³´ë¥¼ ë³´ë‚´ì¤„ ê²ƒ(return)ì´ë¼ëŠ” ëœ»ì¸ë‹¤**
- **í˜„ì¬ê¹Œì§€ì˜ ìƒí™©ì„ ì •ë¦¬í•´ë³´ë©´, User(ì‚¬ìš©ì)ê°€ ì–´ë–¤ ìƒí’ˆì„ í´ë¦­í–ˆë‹¤ (ìš”ì²­) â†’**
- **ìš”ì²­ ( Controller â†’ Service(interface) â†’ ServiceImpl(inter êµ¬í˜„) â†’ DAO(interface) â†’ Mybatis(DAO(inter) êµ¬í˜„) â†’ Mapper ì´ë ‡ê²Œ ì‚¬ìš©ìê°€ ìš”êµ¬í•œ ë°ì´í„°ë¥¼ ìš”ì²­í•˜ê¸° ìœ„í•´ SQL ì§‘ ì•ê¹Œì§€ ì°¾ì•„ì™”ë‹¤.. ( ë°ì´í„°ì¢€ ë“€ì„¸ìš”... ì•ˆê·¸ëŸ¼ ëšë•…í•´... )**
- **Mapperì—ì„œ â€œ ë‚˜ëŠ” DTOë€ ë°•ìŠ¤ì— ì •ë³´ë¥¼ ë°›ì•„ì„œ ê°€ì ¸ê°ˆ ê¼¬ì•¼!! â€œ ë¼ëŠ” í•´ì„ì´ë‹¤**
- **ì°¸ê³ ë¡œ DTOëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ ì—†ëŠ” getter, setterë§Œ ìˆëŠ” ì¹œêµ¬ì´ë‹¤.**
- **DTOë¥¼ ( ë°ì´í„°ë¥¼ ì£¼ê³  ë°›ê³  í•  ìˆ˜ ìˆëŠ” ë°•ìŠ¤ ) ë¡œ ë³´ë©´ êµ‰ì¥íˆ ì¢‹ì„ ë“¯ ì‹¶ë‹¤**

### DTOë¼ëŠ” ë°•ìŠ¤ì˜ ìƒê¹€ìƒˆ

![Untitled](%E1%84%8F%E1%85%A9%E1%84%83%E1%85%B3(MVC%20m%20ea8fe/Untitled%2016.png)

- **ì! ì‚¬ìš©ìê°€ ìš”ì²­í•œ ë°ì´í„°ë¥¼ ë°›ì•„ê°ˆ DTOë€ ë°•ìŠ¤ë¥¼ ìì„¸íˆ ì‚´í´ë³¼ê¹Œ?!**
- **DTOëŠ” ìœ„ì—ì„œ ë§í•œëŒ€ë¡œ getter, setterë°–ì— ì—†ëŠ” ì¹œêµ¬ì•¼!**
- **ê·¼ë° ì—¬ê¸°ëŠ” getter, setterë€ ì¹œêµ¬ê°€ ì•ˆì“°ì—¬ìˆëŠ”ë°?**
- **ë§ì•„ ìœ„ì— ì–´ë…¸í…Œì´ì…˜(Annotation) ê³¨ë±…ì´Data ê°€ ë³´ì¼êº¼ì•¼!**
- **ê·¸ ì¹œêµ¬ê°€ getter, setterë¥¼ ì•ˆì¨ë„ ë˜ê²Œë” ë„ì™€ì£¼ëŠ” Lombokì´ë€ ì¹œêµ¬ì•¼!**

### Mapperì—ì„œ ì§‘ìœ¼ë¡œ ë˜ëŒì•„ê°€ë ¤ê³ , Mybatisì— ì™”ì–´! ê·¼ë° ì—¬ê¸°ì„œ List<ShoppingDTO>ë¼ëŠ” ì½”ë“œë¥¼ í•œë²ˆ ì‚´í´ë³´ì!

![Untitled](%E1%84%8F%E1%85%A9%E1%84%83%E1%85%B3(MVC%20m%20ea8fe/Untitled%2017.png)

- **List<shoppingDTOì€ returní˜• typeì´ë‹¤. ìë°”ë¬¸ë²•ìœ¼ë¡œ ì¹˜ìë©´, ë§Œì•½ ì €ê¸°ì— Stringì´ ì¨ìˆë‹¤ë©´
String íƒ€ì…ìœ¼ë¡œ returní•  ë°ì´í„°ê°€ ìˆë‹¤ëŠ” ëœ»ì´ë‹¤!**
- **ê·¸ëŸ¼ ì—¬ê¸°ì„œëŠ” shoppingDTO ë¼ëŠ” íƒ€ì…ì˜ return ë°ì´í„°ê°€ ì¡´ì¬í•œë‹¤ëŠ” ëœ»ì¸ë°, ì´ ë°ì´í„°ê°€ ì—¬ëŸ¬ê°œë¼ì„œ Listì— ë‹´ì•„ì„œ ë³´ë‚´ëŠ” ê²ƒì´ë‹¤!**
- **ëŒì•„ ê°ˆë•ŒëŠ”, interfaceë¡œ ê°€ì§€ ì•ŠëŠ”ë‹¤! interfaceëŠ” í‹€ë§Œ ì¡ì•„ì£¼ëŠ” ì¹œêµ¬ì´ê¸° ë•Œë¬¸ì—, ì•ˆ ëŒì•„ê°€!**

- **Mybatisì—ì„œ ëŒì•„ê°ˆ ë•ŒëŠ” Controllerë¡œ ëŒì•„ê°„ë‹¤ (ë°”ë¡œ(?))**

### Controller ì™”ì–´!!

![Untitled](%E1%84%8F%E1%85%A9%E1%84%83%E1%85%B3(MVC%20m%20ea8fe/Untitled%2018.png)

- **ìš°ì„  ì—¬ê¸° ì¨ìˆëŠ” ResponseBody ê°€ ë¬´ì—‡ì¼ê¹Œ?**
    - **ResponseBodyëŠ” Ajaxë¡œ ì»¨íŠ¸ë¡¤ëŸ¬ì— ì™”ì„ ë•Œ ì¨ì¤€ë°!!**
    - **ì‰½ê²Œ ë§í•˜ë©´, ìš°ë¦¬ê°€ ajaxì—ì„œ urlë¥¼ í†µí•´ ì»¨íŠ¸ë¡¤ëŸ¬ë¡œ ì™”ì–ì•„!!**
    - **ì—¬ê¸°ì„œ ResponseBodyë¥¼ ì¨ì£¼ë©´ ë‚˜ë¥¼ ì²˜ìŒì— ë¶€ë¥¸ë†ˆí•œí…Œ ë‹¤ì‹œ ë˜ëŒì•„ê°€ëŠ”ê±°ì•¼!!**
    - **ê·¸ëŸ¼ ì—¬ê¸°ì„œ ResponseBody ì¦‰, ë‚˜ë¥¼ ì²˜ìŒ ë¶€ë¥¸ë†ˆì´ ëˆ„êµ¬ì˜€ì„ê¹Œ? ê¸°ì–µí•˜ì§€?**
    - **ë§ì•„, JSP (ìŠ¤í¬ë¦½íŠ¸ ì–¸ì–´) ì•ˆì— ajaxê°€ urlë¥¼ í†µí•´ ë‚˜ë¥¼ ë¶ˆë €ì—ˆì–´!!**
    

### ê·¸ëŸ¼ Jsp ì•ˆì˜ Ajaxë¡œ ê°€ë³¼ê¹Œ?
ë‚˜ ë‹¤ì‹œ JSPë¡œ ìš”ì²­í•œ ë°ì´í„°ë¥¼ ê°€ì§€ê³  ëŒì•„ì™”ì–´!!

![Untitled](%E1%84%8F%E1%85%A9%E1%84%83%E1%85%B3(MVC%20m%20ea8fe/Untitled%2019.png)

- **ë°ì´í„°ë¥¼ ê°€ì§€ê³  ì˜¤ëŠ”ë° ê¹Œì§€ ì„±ê³µí•œë‹¤ë©´ ajax ì•ˆì— ìˆëŠ” success ê°€ ì‹¤í–‰ëœë‹¤**

â“***19 : 32ì´ˆ***

---

### ë§¤ì¥ì°¾ê¸°

![Untitled](%E1%84%8F%E1%85%A9%E1%84%83%E1%85%B3(MVC%20m%20ea8fe/Untitled%2020.png)

- **ì§€ë„ëŠ” APIë¥¼ ê°€ì ¸ì™€ì„œ ì“°ë˜, ìë°”ìŠ¤í¬ë¦½íŠ¸ë¡œ êµ¬ì„±ë˜ìˆì„ ê²ƒì´ë‹¤.**
- **ë§¤ì¥ ìœ„ì¹˜ëŠ” DBì— ì €ì¥ë˜ìˆëŠ” ê²ƒì„ ê°€ì ¸ë‹¤ ì“´ë‹¤.**